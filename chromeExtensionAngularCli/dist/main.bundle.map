{"version":3,"sources":["webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 342;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 342\n// module chunks = 1","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { enableProdMode } from '@angular/core';\nimport { environment } from './environments/environment';\nimport { AppModule } from './app/app.module';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component, NgZone } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n    bookshelves;\n    bookShelfNames;\n    histories;\n    displayHistories;\n    filters;\n    ngZone;\n    timeOut;\n    readonly animationDelay:number = 40; // no animation by default\n\n    updateHistories(key, index, visitCount){\n        // each url has a visitCount\n        if(index == this.histories.length){\n            // newly added items\n            this.histories.push([key,visitCount])\n            this.ngZone.run(()=>setTimeout(()=>this.displayHistories.push([key,visitCount]),this.timeOut += this.animationDelay));\n        }else{\n            this.histories[index][1] += visitCount;\n            this.ngZone.run(()=>setTimeout(()=>this.displayHistories[index][1] += visitCount,this.timeOut+=this.animationDelay));\n        }\n        // pop up\n        let returnV = 0;\n        for(let i=index-1; i>=0; i--){\n            //TODO linked list will be easier\n            if(this.histories[i][1] >= this.histories[i+1][1]){\n                returnV = i+1;\n                break;\n            }else{\n                let temp = this.histories[i];\n                this.histories[i] = this.histories[i+1];\n                this.histories[i+1] = temp;\n                this.ngZone.run(()=>setTimeout(()=>{\n                    let temp = this.displayHistories[i];\n                    this.displayHistories[i] = this.displayHistories[i+1];\n                    this.displayHistories[i+1] = temp;\n                },this.timeOut += this.animationDelay))\n            }\n        }\n        // return newindex\n        return returnV;\n    }\n\n    //TODO merge them into one button\n    rename(bookmark){\n        var newName = prompt(\"Bookmark Name:\",bookmark.title);\n        if(newName != null){\n            chrome.bookmarks.update(bookmark.id,{'title':newName},()=>{\n                chrome.bookmarks.getRecent(20,(results)=>{\n                    this.refresh();\n                })\n            })\n        }\n    }\n    delete(bookmark){\n        chrome.bookmarks.remove(bookmark.id,()=>{\n            chrome.bookmarks.getRecent(20,(results)=>{\n                this.refresh();\n            })\n        })\n    }\n    refresh(){\n        // TODO why immediately executed function doesn't work\n        // ts => js issue\n        let semaphore = 0;\n        for(let i = 0; i < this.filters.length; i++){\n            console.log(\"search for \" + \"[\"+this.filters[i]+\"]\");\n            chrome.bookmarks.search(\"[\"+this.filters[i]+\"]\",(results)=>{\n                    this.bookshelves[this.filters[i]] = results;\n                    if(++semaphore == this.filters.length){\n                        this.ngZone.run(()=>{this.bookShelfNames = Object.keys(this.bookshelves);});\n                    }\n                });\n            // chrome.bookmarks.search(\"[\"+this.filters[i]+\"]\",(function(i){\n            //     return (results)=>{\n            //         this.bookshelves[this.filters[i]] = results;\n            //         this.ngZone.run(()=>{this.bookShelfNames = Object.keys(this.bookshelves);});\n            //     };\n            // }).bind(this,i)());\n        }\n    }\n    // TODO delete and rename, we don't need to search for everything\n    // refreshSingleBookshelf(name){\n    //\n    // }\n    constructor(ngzone:NgZone){\n        this.ngZone = ngzone;\n        this.bookshelves = {};\n        this.histories = [];\n        this.displayHistories = [];\n        this.timeOut = 0;\n        if (window.localStorage.getItem(\"filters\") == null){\n            this.filters = []; // if we put null, refresh for loop will fail\n        }else{\n            this.filters = window.localStorage.getItem(\"filters\").split(\" \");\n        }\n        this.refresh();\n        // get pages visited from lastweek\n        var millisecondsInOneWeek:number = 1000*60*60*24*7;\n        var oneWeekAgo:number = (new Date()).getTime()-millisecondsInOneWeek;\n        var searchObject = {'text':'','startTime':oneWeekAgo};\n        chrome.history.search(searchObject,(historyItems)=>{\n            // TODO optimization\n            var dictionary = {}; // not an array\n            var pattern = /https?:\\/\\/[^/]*/; // only want the hostname\n            for(let historyItem of historyItems){\n                var matchResults = historyItem.url.match(pattern);\n                if(matchResults != null &&  matchResults.length == 1){\n                    // if no matches, the return value is null instead of an array\n                    var rootUrl:string = matchResults[0];\n                    if (rootUrl in dictionary){\n                        dictionary[rootUrl] = this.updateHistories(rootUrl,dictionary[rootUrl],historyItem.visitCount);\n                    }else{\n                        dictionary[rootUrl] = this.updateHistories(rootUrl,this.histories.length,historyItem.visitCount);\n                    }\n                }\n            }\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","module.exports = \".bookmark:hover a{\\r\\n    display: block;\\r\\n}\\r\\n.bookmark .buttons, .bookmark a{\\r\\n    display:none\\r\\n}\\r\\n.bookmark{\\r\\n    display:-webkit-box;\\r\\n    display:-ms-flexbox;\\r\\n    display:flex;\\r\\n}\\r\\n.bookmark .title{\\r\\n    display:block;\\r\\n}\\r\\n.bookmark a, .bookmark .title {\\r\\n    white-space:pre;\\r\\n    overflow:hidden;\\r\\n    text-overflow:ellipsis;\\r\\n}\\r\\n.bookmark a{\\r\\n    color: hsl(0, 0%, 70%);\\r\\n    -ms-flex-negative:4;\\r\\n        flex-shrink:4;\\r\\n}\\r\\n#shortcut ul{\\r\\n    display:inline-block;\\r\\n    width:22%\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 607\n// module chunks = 1","module.exports = \"<div id=\\\"shortcut\\\">\\n<ul *ngFor=\\\"let bookshelfName of bookShelfNames\\\">\\n<div>[{{bookshelfName}}]</div>\\n<li class=\\\"bookmark\\\" *ngFor=\\\"let bookmark of bookshelves[bookshelfName]\\\">\\n        <img src=\\\"chrome://favicon/size/16@1x/{{bookmark.url}}\\\" width=\\\"16\\\" height=\\\"16\\\">\\n        <span class=\\\"title\\\">{{bookmark.title.substring(bookshelfName.length+2)}}</span>\\n        <a href=\\\"{{bookmark.url}}\\\">{{bookmark.url}}</a>\\n        <span class=\\\"buttons\\\">\\n            <button (click)=\\\"delete(bookmark)\\\" >Delete</button>\\n            <button (click)=\\\"rename(bookmark)\\\" >Rename</button>\\n        </span>\\n</li>\\n</ul>\\n</div>\\n\\n<ul>\\n    <li *ngFor=\\\"let history of displayHistories\\\">\\n        {{history[0]}} => {{history[1]}}\\n    </li>\\n</ul>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 608\n// module chunks = 1"],"sourceRoot":""}